# TRL 环境搭建指南 (使用uv包管理器)

## 1. 系统要求
- Python 3.8+
- CUDA 11.0+ (如果使用GPU)
- 至少8GB RAM (建议16GB+)

## 2. 使用uv快速安装

### 方式一：一键安装脚本
```bash
# 运行自动安装脚本
./install.sh

# 激活环境
source trl_env/bin/activate

# 验证安装
python setup_environment.py
```

### 方式二：手动使用uv安装

```bash
# 安装uv (如果尚未安装)
curl -LsSf https://astral.sh/uv/install.sh | sh

# 创建虚拟环境
uv venv trl_env

# 激活虚拟环境
source trl_env/bin/activate  # Linux/Mac
# trl_env\Scripts\activate  # Windows

# 安装项目依赖
uv pip install -e .

# 或者直接从requirements.txt安装
uv pip install -r requirements.txt
```

### 方式三：使用pyproject.toml (推荐)

```bash
# 安装基础依赖
uv pip install -e .

# 安装开发依赖
uv pip install -e ".[dev]"

# 安装GPU支持 (如果有CUDA)
uv pip install -e ".[gpu]"
```

## 3. uv的优势

- ⚡ **超快速度**: 比pip快10-100倍
- 🔒 **依赖锁定**: 自动生成uv.lock文件
- 🎯 **精确解析**: 更好的依赖冲突解决
- 💾 **缓存优化**: 智能缓存机制
- 🐍 **Python管理**: 内置Python版本管理

## 4. 验证安装

```python
import trl
import transformers
import torch

print(f"TRL version: {trl.__version__}")
print(f"Transformers version: {transformers.__version__}")
print(f"PyTorch version: {torch.__version__}")
print(f"CUDA available: {torch.cuda.is_available()}")
```

## 5. 项目结构

```
trl_learning/
├── pyproject.toml      # 项目配置和依赖
├── uv.lock            # 锁定的依赖版本 (自动生成)
├── trl_env/           # uv虚拟环境
├── notebooks/         # Jupyter笔记本
├── scripts/           # 训练脚本
├── models/            # 保存的模型
├── data/             # 数据集
├── configs/          # 配置文件
└── utils/            # 工具函数
```

## 6. 常用uv命令

```bash
# 创建环境
uv venv [env_name]

# 安装包
uv pip install package_name

# 安装项目依赖
uv pip install -e .

# 生成requirements.txt
uv pip freeze > requirements.txt

# 同步环境
uv pip sync requirements.txt

# 查看已安装包
uv pip list

# 更新包
uv pip install --upgrade package_name
```